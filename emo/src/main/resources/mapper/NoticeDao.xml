<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dadaepo.emo.dao.NoticeDao">
    <insert id="insertNotice" parameterType="com.dadaepo.emo.dto.notice.NoticeRequest">
        INSERT INTO notice(
            send_id
        , receive_id
        , type
        )
        Values(
            #{sendId}
        , #{receiveId}
        , #{type}
        )
    </insert>
    <select id="selectNotices" resultType="com.dadaepo.emo.dto.notice.NoticeInfo" >
        SELECT id
            , type
            , status
            , date
            , send_id AS sendId
        FROM notice
        WHERE receive_id = #{memberId}
        ORDER BY date DESC
        LIMIT #{start}, #{limit}
    </select>
    <select id="selectTotalCount" resultType="int">
        SELECT COUNT(*)
        FROM notice
        WHERE receive_id = #{memberId}
    </select>
    <update id="updateStatus">
        UPDATE notice
        SET status = true
        WHERE id = #{noticeId}
    </update>
    <delete id="deleteNotice">
        DELETE FROM notice
        WHERE id = #{noticeId}
    </delete>
</mapper>
